!function(){"use strict";angular.module("app",["ngResource","ngMaterial","ui.router","module.book"])}(),function(){"use strict";function o(o){o.html5Mode(!0)}angular.module("app").config(o),o.$inject=["$locationProvider"]}(),function(){"use strict";function o(o,t){function e(){t.go("list"),r=!1}var r=!1,n={error404:function(){n.show("404","Запрашиваемая страница не существует")},error400:function(){n.show("400","Не верный запрос к получению данных")},error500:function(){n.show("500","Проблемы связи с серверов")},show:function(t,n){r||(r=!0,o.show(o.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!1).title(t).textContent(n).ok("Перейти к списку").targetEvent(null)).then(e,e))}};return n}angular.module("app").service("dialogAlert",o),o.$inject=["$mdDialog","$state"]}(),function(){"use strict";angular.module("module.book",[])}(),function(){"use strict";function o(o){var t="https://ds.aggregion.com/api/public/catalog/:bookId",e={getBookInfo:{method:"get"},getBookList:{method:"get",isArray:!0}},r=o(t,{bookId:"@bookId"},e),n="https://ds.aggregion.com/api/public/catalog/:bookId/bundles/:bundleId",i={getBundle:{method:"get"},getBundleList:{method:"get",isArray:!0}},u=o(n,{bookId:"@bookId",bundleId:"@bundleId"},i);return{book:r,bundle:u}}angular.module("module.book").factory("apiService",o),o.$inject=["$resource"]}(),function(){"use strict";function o(){function o(o,t,e){var r=e.bgBook,n="http://storage.aggregion.com/api/files/"+r+"/shared/data",i=new Image;i.onload=function(){t.css({"background-image":"url("+n+")","background-size":"cover"})},i.onerror=function(){t.css({"background-image":"url("+e.bgMock+")","background-size":"cover"})},i.src=n}var t={link:o,restrict:"A"};return t}function t(){function o(o,t,e){var r=e.srcBook,n="http://storage.aggregion.com/api/files/"+r+"/shared/data",i=new Image;i.onload=function(){t.attr("src",n)},i.onerror=function(){t.attr("src",e.srcMock)},i.src=n}var t={link:o,restrict:"A"};return t}angular.module("module.book").directive("bgBook",o).directive("srcBook",t)}(),function(){"use strict";function o(o,r){o.state("list",{url:"/",templateUrl:"/templates/book.list.html",controller:"BookListController",controllerAs:"vm"}),o.state("book",{url:"/book/:id",templateUrl:"/templates/book.info.html",controller:"BookInfoController",controllerAs:"vm",resolve:{book:t,bundles:e}}),o.state("error404",{url:"/error404",templateUrl:"/templates/404.html"}),o.state("error400",{url:"/error400",templateUrl:"/templates/400.html"}),o.state("error500",{url:"/error500",templateUrl:"/templates/500.html"}),r.otherwise("/error404")}function t(o,t){return t.book.getBookInfo({bookId:o.id})}function e(o,t){return t.bundle.getBundleList({bookId:o.id})}angular.module("module.book").config(o),o.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["$stateParams","apiService"],e.$inject=["$stateParams","apiService"]}(),function(){"use strict";function o(o,t,e,r){var n=this;t.$promise.then(function(){n.book=t},function(t){"404,400,500".indexOf(t.status)!==-1?o.go("error"+t.status):r.show(result.status,"Неизвестная ошибка")}),t.$promise.then(function(){n.bundles=e},function(t){"404,400,500".indexOf(t.status)!==-1?o.go("error"+t.status):r.show(result.status,"Неизвестная ошибка")}),n.goList=function(){o.go("list")}}function t(o,t,e){var r=this;o.book.getBookList(function(o){r.list=o},function(o){"404,400,500".indexOf(o.status)!==-1?t.go("error"+o.status):e.show(o.status,"Неизвестная ошибка")})}angular.module("module.book").controller("BookListController",t).controller("BookInfoController",o),o.$inject=["$state","book","bundles","dialogAlert"],t.$inject=["apiService","$state","dialogAlert"]}(),function(){"use strict";function o(o){return function(t){return o.trustAsHtml(t.replace(/\n/g,"<br>"))}}angular.module("module.book").filter("plain",o),o.$inject=["$sce"]}();